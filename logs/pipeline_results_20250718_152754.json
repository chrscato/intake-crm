{
  "start_time": "2025-07-18T15:27:54.515993",
  "steps": [
    {
      "name": "Email Ingestion",
      "start_time": "2025-07-18T15:27:54.518818",
      "command": "C:\\Users\\ChristopherCato\\AppData\\Local\\Programs\\Python\\Python313\\python.exe scripts/run_email_ingestion.py --max-emails 1 --action fetch --folder Intake",
      "success": true,
      "duration_seconds": 4.835057,
      "output": "\ud83d\ude80 Email Ingestion Tool\n   Mailbox: assignment@clarity-dx.com\n   Folder: Inbox/Intake\n   Action: fetch\n   Filter: Original inbound only\n\n\ud83d\udce7 Fetching emails...\n\ud83d\udd0d Looking for messages in assignment@clarity-dx.com/Inbox/Intake\n\ud83d\udcc1 Source folder ID: AQMkADBlMGM0OTU0LTJkOWUtNDFiNi1hMTkzLWZiYTUzZGNhNmQ3NQAuAAADqejEcgLQRkOEx9g2AE2OvQEAXEGTY4P1bkO8jpnh-Gd17wAFKQYJGwAAAA==\n\ud83d\udcc1 Destination folder ID: AQMkADBlMGM0OTU0LTJkOWUtNDFiNi1hMTkzLWZiYTUzZGNhNmQ3NQAuAAADqejEcgLQRkOEx9g2AE2OvQEAXEGTY4P1bkO8jpnh-Gd17wAFKQYJHAAAAA==\n\n\ud83d\udcca Summary:\n- Total messages found: 0\n- Original inbound emails: 0\n- Skipped replies/forwards: 0\n- Failed to process: 0\n- Total attachments: 0\n- Data saved to: data\\emails\n\n\u2705 Email fetching completed!\n   Processed: 0 emails\n   Attachments: 0 files\n   Saved to: data\\emails\n\n\ud83c\udf89 All done!\n",
      "error": ""
    },
    {
      "name": "LLM Data Extraction",
      "start_time": "2025-07-18T15:28:01.355855",
      "command": "C:\\Users\\ChristopherCato\\AppData\\Local\\Programs\\Python\\Python313\\python.exe scripts/run_llm_extraction.py --archive",
      "success": true,
      "duration_seconds": 163.719457,
      "output": "\ud83d\udd27 DEBUG: Using 33 fields from sample: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']\n\ud83d\udd17 Connecting to database: intake-crm.db\n\u2705 Database connection established\n\ud83d\ude80 Running extraction on 11 directories\n\ud83d\udd27 DEBUG: Processing directory: 20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061\n\ud83d\udd27 DEBUG: Checking required files...\n\ud83d\udd27 DEBUG: Summary file exists: True\n\ud83d\udd27 DEBUG: Metadata file exists: True\n\ud83d\udd27 DEBUG: Attachments dir exists: True\n\ud83d\udd27 DEBUG: Loading JSON files...\n\ud83d\udd27 DEBUG: JSON files loaded successfully\n\ud83d\udd27 DEBUG: Email text length: 10349 characters\n\ud83d\udd27 DEBUG: Found 7 attachments\n\ud83d\udd27 DEBUG: Checking attachment: Document.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding Document.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 117046 bytes\n\ud83d\udd27 DEBUG: Added Document.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image269152.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image269152.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 1823 bytes\n\ud83d\udd27 DEBUG: Added image269152.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image322368.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image322368.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 572 bytes\n\ud83d\udd27 DEBUG: Added image322368.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image518828.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image518828.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 773 bytes\n\ud83d\udd27 DEBUG: Added image518828.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image589009.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image589009.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 495 bytes\n\ud83d\udd27 DEBUG: Added image589009.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: MedicalReportForm2.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding MedicalReportForm2.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 4731905 bytes\n\ud83d\udd27 DEBUG: Added MedicalReportForm2.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: MedicalReportingForm.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding MedicalReportingForm.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 4577665 bytes\n\ud83d\udd27 DEBUG: Added MedicalReportingForm.pdf to processing list\n\ud83d\udd27 DEBUG: Processing 7 attachments together\n\ud83d\udd27 DEBUG: Calling consolidated extract function...\n\ud83d\udd27 DEBUG: Starting consolidated extraction for 7 files\n\ud83d\udd27 DEBUG: Email body length: 10349 characters\n\ud83d\udd27 DEBUG: OpenAI API Key set: \u2705\n\ud83d\udd27 DEBUG: Processing file 1/7: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 2 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 513980\n\ud83d\udd27 DEBUG: Processing file 2/7: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 2432\n\ud83d\udd27 DEBUG: Processing file 3/7: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 764\n\ud83d\udd27 DEBUG: Processing file 4/7: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 1032\n\ud83d\udd27 DEBUG: Processing file 5/7: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 660\n\ud83d\udd27 DEBUG: Processing file 6/7: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 1 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 693108\n\ud83d\udd27 DEBUG: Processing file 7/7: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 1 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 655932\n\ud83d\udd27 DEBUG: Prepared content with 8 items (1 text + 7 images)\n\ud83d\udd27 DEBUG: Preparing OpenAI API call...\n\ud83d\udd27 DEBUG: Using model: gpt-4o-mini\n\ud83d\udd27 DEBUG: Max tokens: 2048\n\ud83d\udd27 DEBUG: Making OpenAI API call...\n\ud83d\udd27 DEBUG: OpenAI API call completed\n\ud83d\udd27 DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>\n\ud83d\udd27 DEBUG: Number of choices: 1\n\ud83d\udd27 DEBUG: Response content length: 1331\n\ud83d\udd27 DEBUG: Response content preview: ```json\n{\n  \"referral\": true,\n  \"employer_address\": \"P.O. Box 110279, BRADENTON, FL 342110004\",\n  \"employer_email\": null,\n  \"injury_description\": \"Employee was playing soccer, injured left knee.\",\n  \"...\n\ud83d\udd27 DEBUG: Attempting to parse JSON...\n\ud83d\udd27 DEBUG: JSON parsing successful\n\ud83d\udd27 DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']\n\ud83d\udd27 DEBUG: Consolidated extraction completed successfully\n\u274c Database update failed for 20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061: 39 values for 38 columns\n\u274c Failed to update database for 20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061\n\ud83d\udd27 DEBUG: Processing directory: 20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535\n\ud83d\udd27 DEBUG: Checking required files...\n\ud83d\udd27 DEBUG: Summary file exists: True\n\ud83d\udd27 DEBUG: Metadata file exists: True\n\ud83d\udd27 DEBUG: Attachments dir exists: True\n\ud83d\udd27 DEBUG: Loading JSON files...\n\ud83d\udd27 DEBUG: JSON files loaded successfully\n\ud83d\udd27 DEBUG: Email text length: 4589 characters\n\ud83d\udd27 DEBUG: Found 4 attachments\n\ud83d\udd27 DEBUG: Checking attachment: image001.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image001.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 1199302 bytes\n\ud83d\udd27 DEBUG: Added image001.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: Stephanie_Abel_FROI.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding Stephanie_Abel_FROI.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 93608 bytes\n\ud83d\udd27 DEBUG: Added Stephanie_Abel_FROI.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: Stephanie_Abel_L_Knee_MRI_Order_Murphy_6-26-25.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding Stephanie_Abel_L_Knee_MRI_Order_Murphy_6-26-25.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 1404807 bytes\n\ud83d\udd27 DEBUG: Added Stephanie_Abel_L_Knee_MRI_Order_Murphy_6-26-25.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: Stephanie_Abel_REF_2.docx\n\ud83d\udd27 DEBUG: Attachment suffix: .docx\n\ud83d\udd27 DEBUG: Supported file type: False\n\ud83d\udd27 DEBUG: Skipping unsupported file: Stephanie_Abel_REF_2.docx\n\ud83d\udd27 DEBUG: Processing 3 attachments together\n\ud83d\udd27 DEBUG: Calling consolidated extract function...\n\ud83d\udd27 DEBUG: Starting consolidated extraction for 3 files\n\ud83d\udd27 DEBUG: Email body length: 4589 characters\n\ud83d\udd27 DEBUG: OpenAI API Key set: \u2705\n\ud83d\udd27 DEBUG: Processing file 1/3: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 1599072\n\ud83d\udd27 DEBUG: Processing file 2/3: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 2 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 498176\n\ud83d\udd27 DEBUG: Processing file 3/3: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 1 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 505096\n\ud83d\udd27 DEBUG: Prepared content with 4 items (1 text + 3 images)\n\ud83d\udd27 DEBUG: Preparing OpenAI API call...\n\ud83d\udd27 DEBUG: Using model: gpt-4o-mini\n\ud83d\udd27 DEBUG: Max tokens: 2048\n\ud83d\udd27 DEBUG: Making OpenAI API call...\n\ud83d\udd27 DEBUG: OpenAI API call completed\n\ud83d\udd27 DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>\n\ud83d\udd27 DEBUG: Number of choices: 1\n\ud83d\udd27 DEBUG: Response content length: 1525\n\ud83d\udd27 DEBUG: Response content preview: ```json\n{\n  \"referral\": true,\n  \"employer_address\": \"8083 Parramore Rd\\nJacksonville, FL 32244\",\n  \"employer_email\": null,\n  \"injury_description\": \"Officer was kicked in the knee by suspect while tryi...\n\ud83d\udd27 DEBUG: Attempting to parse JSON...\n\ud83d\udd27 DEBUG: JSON parsing successful\n\ud83d\udd27 DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']\n\ud83d\udd27 DEBUG: Consolidated extraction completed successfully\n\u274c Database update failed for 20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535: 39 values for 38 columns\n\u274c Failed to update database for 20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535\n\ud83d\udd27 DEBUG: Processing directory: 20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge\n\ud83d\udd27 DEBUG: Checking required files...\n\ud83d\udd27 DEBUG: Summary file exists: True\n\ud83d\udd27 DEBUG: Metadata file exists: True\n\ud83d\udd27 DEBUG: Attachments dir exists: True\n\ud83d\udd27 DEBUG: Loading JSON files...\n\ud83d\udd27 DEBUG: JSON files loaded successfully\n\ud83d\udd27 DEBUG: Email text length: 3596 characters\n\ud83d\udd27 DEBUG: Found 5 attachments\n\ud83d\udd27 DEBUG: Checking attachment: Cert_JorCru_03-28-2025.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding Cert_JorCru_03-28-2025.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 215642 bytes\n\ud83d\udd27 DEBUG: Added Cert_JorCru_03-28-2025.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image001.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image001.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 10960 bytes\n\ud83d\udd27 DEBUG: Added image001.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image002.jpg\n\ud83d\udd27 DEBUG: Attachment suffix: .jpg\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image002.jpg to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 2912 bytes\n\ud83d\udd27 DEBUG: Added image002.jpg to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image003.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image003.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 10410 bytes\n\ud83d\udd27 DEBUG: Added image003.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image004.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image004.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 17038 bytes\n\ud83d\udd27 DEBUG: Added image004.png to processing list\n\ud83d\udd27 DEBUG: Processing 5 attachments together\n\ud83d\udd27 DEBUG: Calling consolidated extract function...\n\ud83d\udd27 DEBUG: Starting consolidated extraction for 5 files\n\ud83d\udd27 DEBUG: Email body length: 3596 characters\n\ud83d\udd27 DEBUG: OpenAI API Key set: \u2705\n\ud83d\udd27 DEBUG: Processing file 1/5: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 2 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 350004\n\ud83d\udd27 DEBUG: Processing file 2/5: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 14616\n\ud83d\udd27 DEBUG: Processing file 3/5: .jpg\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 3884\n\ud83d\udd27 DEBUG: Processing file 4/5: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 13880\n\ud83d\udd27 DEBUG: Processing file 5/5: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 22720\n\ud83d\udd27 DEBUG: Prepared content with 6 items (1 text + 5 images)\n\ud83d\udd27 DEBUG: Preparing OpenAI API call...\n\ud83d\udd27 DEBUG: Using model: gpt-4o-mini\n\ud83d\udd27 DEBUG: Max tokens: 2048\n\ud83d\udd27 DEBUG: Making OpenAI API call...\n\ud83d\udd27 DEBUG: OpenAI API call completed\n\ud83d\udd27 DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>\n\ud83d\udd27 DEBUG: Number of choices: 1\n\ud83d\udd27 DEBUG: Response content length: 1269\n\ud83d\udd27 DEBUG: Response content preview: ```json\n{\n  \"referral\": true,\n  \"employer_address\": \"2 East Main Street, Ste. 208, Danville, IL 61832\",\n  \"employer_email\": \"fong.moua@ccmsi.com\",\n  \"injury_description\": \"Bilateral Lower Extremities\"...\n\ud83d\udd27 DEBUG: Attempting to parse JSON...\n\ud83d\udd27 DEBUG: JSON parsing successful\n\ud83d\udd27 DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']\n\ud83d\udd27 DEBUG: Consolidated extraction completed successfully\n\u274c Database update failed for 20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge: 39 values for 38 columns\n\u274c Failed to update database for 20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge\n\ud83d\udd27 DEBUG: Processing directory: 20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373\n\ud83d\udd27 DEBUG: Checking required files...\n\ud83d\udd27 DEBUG: Summary file exists: True\n\ud83d\udd27 DEBUG: Metadata file exists: True\n\ud83d\udd27 DEBUG: Attachments dir exists: True\n\ud83d\udd27 DEBUG: Loading JSON files...\n\ud83d\udd27 DEBUG: JSON files loaded successfully\n\ud83d\udd27 DEBUG: Email text length: 3745 characters\n\ud83d\udd27 DEBUG: Found 4 attachments\n\ud83d\udd27 DEBUG: Checking attachment: image001.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image001.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 6742 bytes\n\ud83d\udd27 DEBUG: Added image001.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image003.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image003.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 3832 bytes\n\ud83d\udd27 DEBUG: Added image003.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: N_Rangel_MRI_L_knee_RX.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding N_Rangel_MRI_L_knee_RX.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 91428 bytes\n\ud83d\udd27 DEBUG: Added N_Rangel_MRI_L_knee_RX.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: NOI.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding NOI.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 119676 bytes\n\ud83d\udd27 DEBUG: Added NOI.pdf to processing list\n\ud83d\udd27 DEBUG: Processing 4 attachments together\n\ud83d\udd27 DEBUG: Calling consolidated extract function...\n\ud83d\udd27 DEBUG: Starting consolidated extraction for 4 files\n\ud83d\udd27 DEBUG: Email body length: 3745 characters\n\ud83d\udd27 DEBUG: OpenAI API Key set: \u2705\n\ud83d\udd27 DEBUG: Processing file 1/4: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 8992\n\ud83d\udd27 DEBUG: Processing file 2/4: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 5112\n\ud83d\udd27 DEBUG: Processing file 3/4: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 3 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 763480\n\ud83d\udd27 DEBUG: Processing file 4/4: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 2 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 563312\n\ud83d\udd27 DEBUG: Prepared content with 5 items (1 text + 4 images)\n\ud83d\udd27 DEBUG: Preparing OpenAI API call...\n\ud83d\udd27 DEBUG: Using model: gpt-4o-mini\n\ud83d\udd27 DEBUG: Max tokens: 2048\n\ud83d\udd27 DEBUG: Making OpenAI API call...\n\ud83d\udd27 DEBUG: OpenAI API call completed\n\ud83d\udd27 DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>\n\ud83d\udd27 DEBUG: Number of choices: 1\n\ud83d\udd27 DEBUG: Response content length: 1322\n\ud83d\udd27 DEBUG: Response content preview: ```json\n{\n  \"referral\": true,\n  \"employer_address\": \"1960 LANDING BLVD, SARASOTA, FL 34231\",\n  \"employer_email\": null,\n  \"injury_description\": \"Worker was cleaning the restroom; she tripped and fell o...\n\ud83d\udd27 DEBUG: Attempting to parse JSON...\n\ud83d\udd27 DEBUG: JSON parsing successful\n\ud83d\udd27 DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']\n\ud83d\udd27 DEBUG: Consolidated extraction completed successfully\n\u274c Database update failed for 20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373: 39 values for 38 columns\n\u274c Failed to update database for 20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373\n\ud83d\udd27 DEBUG: Processing directory: 20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS\n\ud83d\udd27 DEBUG: Checking required files...\n\ud83d\udd27 DEBUG: Summary file exists: True\n\ud83d\udd27 DEBUG: Metadata file exists: True\n\ud83d\udd27 DEBUG: Attachments dir exists: True\n\ud83d\udd27 DEBUG: Loading JSON files...\n\ud83d\udd27 DEBUG: JSON files loaded successfully\n\ud83d\udd27 DEBUG: Email text length: 6030 characters\n\ud83d\udd27 DEBUG: Found 4 attachments\n\ud83d\udd27 DEBUG: Checking attachment: First_Report_of_Injury_or_Illness_LMills.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding First_Report_of_Injury_or_Illness_LMills.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 112402 bytes\n\ud83d\udd27 DEBUG: Added First_Report_of_Injury_or_Illness_LMills.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image001.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image001.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 14001 bytes\n\ud83d\udd27 DEBUG: Added image001.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: MRI_Referral_LaNarria_Mills.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding MRI_Referral_LaNarria_Mills.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 117501 bytes\n\ud83d\udd27 DEBUG: Added MRI_Referral_LaNarria_Mills.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: Workers_Comp_Referral_Information-LaNarria_Wells.docx\n\ud83d\udd27 DEBUG: Attachment suffix: .docx\n\ud83d\udd27 DEBUG: Supported file type: False\n\ud83d\udd27 DEBUG: Skipping unsupported file: Workers_Comp_Referral_Information-LaNarria_Wells.docx\n\ud83d\udd27 DEBUG: Processing 3 attachments together\n\ud83d\udd27 DEBUG: Calling consolidated extract function...\n\ud83d\udd27 DEBUG: Starting consolidated extraction for 3 files\n\ud83d\udd27 DEBUG: Email body length: 6030 characters\n\ud83d\udd27 DEBUG: OpenAI API Key set: \u2705\n\ud83d\udd27 DEBUG: Processing file 1/3: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 2 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 564200\n\ud83d\udd27 DEBUG: Processing file 2/3: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 18668\n\ud83d\udd27 DEBUG: Processing file 3/3: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 1 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 225172\n\ud83d\udd27 DEBUG: Prepared content with 4 items (1 text + 3 images)\n\ud83d\udd27 DEBUG: Preparing OpenAI API call...\n\ud83d\udd27 DEBUG: Using model: gpt-4o-mini\n\ud83d\udd27 DEBUG: Max tokens: 2048\n\ud83d\udd27 DEBUG: Making OpenAI API call...\n\ud83d\udd27 DEBUG: OpenAI API call completed\n\ud83d\udd27 DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>\n\ud83d\udd27 DEBUG: Number of choices: 1\n\ud83d\udd27 DEBUG: Response content length: 1539\n\ud83d\udd27 DEBUG: Response content preview: ```json\n{\n  \"referral\": true,\n  \"employer_address\": \"117 West Duval Street, Suite 335, Jacksonville, FL 32202\",\n  \"employer_email\": null,\n  \"injury_description\": \"Unable to obtain time of report. Witn...\n\ud83d\udd27 DEBUG: Attempting to parse JSON...\n\ud83d\udd27 DEBUG: JSON parsing successful\n\ud83d\udd27 DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']\n\ud83d\udd27 DEBUG: Consolidated extraction completed successfully\n\u274c Database update failed for 20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS: 39 values for 38 columns\n\u274c Failed to update database for 20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS\n\ud83d\udd27 DEBUG: Processing directory: 20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah\n\ud83d\udd27 DEBUG: Checking required files...\n\ud83d\udd27 DEBUG: Summary file exists: True\n\ud83d\udd27 DEBUG: Metadata file exists: True\n\ud83d\udd27 DEBUG: Attachments dir exists: True\n\ud83d\udd27 DEBUG: Loading JSON files...\n\ud83d\udd27 DEBUG: JSON files loaded successfully\n\ud83d\udd27 DEBUG: Email text length: 2221 characters\n\ud83d\udd27 DEBUG: Found 3 attachments\n\ud83d\udd27 DEBUG: Checking attachment: FROI_SP.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding FROI_SP.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 600352 bytes\n\ud83d\udd27 DEBUG: Added FROI_SP.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image001.jpg\n\ud83d\udd27 DEBUG: Attachment suffix: .jpg\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image001.jpg to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 1931 bytes\n\ud83d\udd27 DEBUG: Added image001.jpg to processing list\n\ud83d\udd27 DEBUG: Checking attachment: mri_script.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding mri_script.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 72765 bytes\n\ud83d\udd27 DEBUG: Added mri_script.pdf to processing list\n\ud83d\udd27 DEBUG: Processing 3 attachments together\n\ud83d\udd27 DEBUG: Calling consolidated extract function...\n\ud83d\udd27 DEBUG: Starting consolidated extraction for 3 files\n\ud83d\udd27 DEBUG: Email body length: 2221 characters\n\ud83d\udd27 DEBUG: OpenAI API Key set: \u2705\n\ud83d\udd27 DEBUG: Processing file 1/3: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 2 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 544460\n\ud83d\udd27 DEBUG: Processing file 2/3: .jpg\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 2576\n\ud83d\udd27 DEBUG: Processing file 3/3: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 1 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 271852\n\ud83d\udd27 DEBUG: Prepared content with 4 items (1 text + 3 images)\n\ud83d\udd27 DEBUG: Preparing OpenAI API call...\n\ud83d\udd27 DEBUG: Using model: gpt-4o-mini\n\ud83d\udd27 DEBUG: Max tokens: 2048\n\ud83d\udd27 DEBUG: Making OpenAI API call...\n\ud83d\udd27 DEBUG: OpenAI API call completed\n\ud83d\udd27 DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>\n\ud83d\udd27 DEBUG: Number of choices: 1\n\ud83d\udd27 DEBUG: Response content length: 1446\n\ud83d\udd27 DEBUG: Response content preview: ```json\n{\n  \"referral\": true,\n  \"employer_address\": \"P.O. Box 32016 Lakeland, FL 33802\",\n  \"employer_email\": null,\n  \"injury_description\": \"Sarah's right knee has been hurting and swollen. She is unab...\n\ud83d\udd27 DEBUG: Attempting to parse JSON...\n\ud83d\udd27 DEBUG: JSON parsing successful\n\ud83d\udd27 DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']\n\ud83d\udd27 DEBUG: Consolidated extraction completed successfully\n\u274c Database update failed for 20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah: 39 values for 38 columns\n\u274c Failed to update database for 20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah\n\ud83d\udd27 DEBUG: Processing directory: 20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO\n\ud83d\udd27 DEBUG: Checking required files...\n\ud83d\udd27 DEBUG: Summary file exists: True\n\ud83d\udd27 DEBUG: Metadata file exists: True\n\ud83d\udd27 DEBUG: Attachments dir exists: True\n\ud83d\udd27 DEBUG: Loading JSON files...\n\ud83d\udd27 DEBUG: JSON files loaded successfully\n\ud83d\udd27 DEBUG: Email text length: 8079 characters\n\ud83d\udd27 DEBUG: Found 8 attachments\n\ud83d\udd27 DEBUG: Checking attachment: DO-01-3471-163_07-10-2025-08-56.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding DO-01-3471-163_07-10-2025-08-56.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 463987 bytes\n\ud83d\udd27 DEBUG: Added DO-01-3471-163_07-10-2025-08-56.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image001.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image001.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 169 bytes\n\ud83d\udd27 DEBUG: Added image001.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image003.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image003.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 8828 bytes\n\ud83d\udd27 DEBUG: Added image003.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image004.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image004.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 2765 bytes\n\ud83d\udd27 DEBUG: Added image004.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image005.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image005.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 5893 bytes\n\ud83d\udd27 DEBUG: Added image005.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image007.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image007.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 121977 bytes\n\ud83d\udd27 DEBUG: Added image007.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image008.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image008.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 184 bytes\n\ud83d\udd27 DEBUG: Added image008.png to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image009.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image009.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 174 bytes\n\ud83d\udd27 DEBUG: Added image009.png to processing list\n\ud83d\udd27 DEBUG: Processing 8 attachments together\n\ud83d\udd27 DEBUG: Calling consolidated extract function...\n\ud83d\udd27 DEBUG: Starting consolidated extraction for 8 files\n\ud83d\udd27 DEBUG: Email body length: 8079 characters\n\ud83d\udd27 DEBUG: OpenAI API Key set: \u2705\n\ud83d\udd27 DEBUG: Processing file 1/8: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 8 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 483688\n\ud83d\udd27 DEBUG: Processing file 2/8: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 228\n\ud83d\udd27 DEBUG: Processing file 3/8: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 11772\n\ud83d\udd27 DEBUG: Processing file 4/8: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 3688\n\ud83d\udd27 DEBUG: Processing file 5/8: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 7860\n\ud83d\udd27 DEBUG: Processing file 6/8: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 162636\n\ud83d\udd27 DEBUG: Processing file 7/8: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 248\n\ud83d\udd27 DEBUG: Processing file 8/8: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 232\n\ud83d\udd27 DEBUG: Prepared content with 9 items (1 text + 8 images)\n\ud83d\udd27 DEBUG: Preparing OpenAI API call...\n\ud83d\udd27 DEBUG: Using model: gpt-4o-mini\n\ud83d\udd27 DEBUG: Max tokens: 2048\n\ud83d\udd27 DEBUG: Making OpenAI API call...\n\ud83d\udd27 DEBUG: OpenAI API call completed\n\ud83d\udd27 DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>\n\ud83d\udd27 DEBUG: Number of choices: 1\n\ud83d\udd27 DEBUG: Response content length: 1401\n\ud83d\udd27 DEBUG: Response content preview: ```json\n{\n  \"referral\": true,\n  \"employer_address\": \"CPC Logistics\",\n  \"employer_email\": null,\n  \"injury_description\": \"Injury occurred while driving a truck, rear ended by a pick up truck.\",\n  \"diagn...\n\ud83d\udd27 DEBUG: Attempting to parse JSON...\n\ud83d\udd27 DEBUG: JSON parsing successful\n\ud83d\udd27 DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']\n\ud83d\udd27 DEBUG: Consolidated extraction completed successfully\n\u274c Database update failed for 20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO: 39 values for 38 columns\n\u274c Failed to update database for 20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO\n\ud83d\udd27 DEBUG: Processing directory: 20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_\n\ud83d\udd27 DEBUG: Checking required files...\n\ud83d\udd27 DEBUG: Summary file exists: True\n\ud83d\udd27 DEBUG: Metadata file exists: True\n\ud83d\udd27 DEBUG: Attachments dir exists: True\n\ud83d\udd27 DEBUG: Loading JSON files...\n\ud83d\udd27 DEBUG: JSON files loaded successfully\n\ud83d\udd27 DEBUG: Email text length: 7525 characters\n\ud83d\udd27 DEBUG: Found 3 attachments\n\ud83d\udd27 DEBUG: Checking attachment: 07-08-25_Jackson_James_Imaging-Ref.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding 07-08-25_Jackson_James_Imaging-Ref.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 1246723 bytes\n\ud83d\udd27 DEBUG: Added 07-08-25_Jackson_James_Imaging-Ref.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: 4-11-25_FIRST_REPORT_OF_INJURY_-_JAMES_JACKSON.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding 4-11-25_FIRST_REPORT_OF_INJURY_-_JAMES_JACKSON.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 152760 bytes\n\ud83d\udd27 DEBUG: Added 4-11-25_FIRST_REPORT_OF_INJURY_-_JAMES_JACKSON.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image001.png\n\ud83d\udd27 DEBUG: Attachment suffix: .png\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding image001.png to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 7876 bytes\n\ud83d\udd27 DEBUG: Added image001.png to processing list\n\ud83d\udd27 DEBUG: Processing 3 attachments together\n\ud83d\udd27 DEBUG: Calling consolidated extract function...\n\ud83d\udd27 DEBUG: Starting consolidated extraction for 3 files\n\ud83d\udd27 DEBUG: Email body length: 7525 characters\n\ud83d\udd27 DEBUG: OpenAI API Key set: \u2705\n\ud83d\udd27 DEBUG: Processing file 1/3: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 1 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 544752\n\ud83d\udd27 DEBUG: Processing file 2/3: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 1 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 625060\n\ud83d\udd27 DEBUG: Processing file 3/3: .png\n\ud83d\udd27 DEBUG: Processing image file directly\n\ud83d\udd27 DEBUG: Image base64 length: 10504\n\ud83d\udd27 DEBUG: Prepared content with 4 items (1 text + 3 images)\n\ud83d\udd27 DEBUG: Preparing OpenAI API call...\n\ud83d\udd27 DEBUG: Using model: gpt-4o-mini\n\ud83d\udd27 DEBUG: Max tokens: 2048\n\ud83d\udd27 DEBUG: Making OpenAI API call...\n\ud83d\udd27 DEBUG: OpenAI API call completed\n\ud83d\udd27 DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>\n\ud83d\udd27 DEBUG: Number of choices: 1\n\ud83d\udd27 DEBUG: Response content length: 1633\n\ud83d\udd27 DEBUG: Response content preview: ```json\n{\n  \"referral\": true,\n  \"employer_address\": \"P.O. Box 111, Tampa, FL 33601-9111\",\n  \"employer_email\": null,\n  \"injury_description\": \"discomfort to right elbow indicative of a sprain/strain\",\n ...\n\ud83d\udd27 DEBUG: Attempting to parse JSON...\n\ud83d\udd27 DEBUG: JSON parsing successful\n\ud83d\udd27 DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']\n\ud83d\udd27 DEBUG: Consolidated extraction completed successfully\n\u274c Database update failed for 20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_: 39 values for 38 columns\n\u274c Failed to update database for 20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_\n\ud83d\udd27 DEBUG: Processing directory: 20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724\n\ud83d\udd27 DEBUG: Checking required files...\n\ud83d\udd27 DEBUG: Summary file exists: True\n\ud83d\udd27 DEBUG: Metadata file exists: True\n\ud83d\udd27 DEBUG: Attachments dir exists: True\n\ud83d\udd27 DEBUG: Loading JSON files...\n\ud83d\udd27 DEBUG: JSON files loaded successfully\n\ud83d\udd27 DEBUG: Email text length: 3404 characters\n\ud83d\udd27 DEBUG: Found 6 attachments\n\ud83d\udd27 DEBUG: Checking attachment: Amelia_Urgent_Care__7-9-25.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding Amelia_Urgent_Care__7-9-25.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 435464 bytes\n\ud83d\udd27 DEBUG: Added Amelia_Urgent_Care__7-9-25.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: Amelia_Urgent_Care_DWC-25_7-9-25.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding Amelia_Urgent_Care_DWC-25_7-9-25.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 202998 bytes\n\ud83d\udd27 DEBUG: Added Amelia_Urgent_Care_DWC-25_7-9-25.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: Amelia_Urgent_Care_MRI_RightKnee_Without_Contrast_Referral_7-9-25.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding Amelia_Urgent_Care_MRI_RightKnee_Without_Contrast_Referral_7-9-25.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 27091 bytes\n\ud83d\udd27 DEBUG: Added Amelia_Urgent_Care_MRI_RightKnee_Without_Contrast_Referral_7-9-25.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: First_Report_of_Injury_or_Illness_-_2025-07-10T070738.159.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding First_Report_of_Injury_or_Illness_-_2025-07-10T070738.159.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 165380 bytes\n\ud83d\udd27 DEBUG: Added First_Report_of_Injury_or_Illness_-_2025-07-10T070738.159.pdf to processing list\n\ud83d\udd27 DEBUG: Checking attachment: image001.gif\n\ud83d\udd27 DEBUG: Attachment suffix: .gif\n\ud83d\udd27 DEBUG: Supported file type: False\n\ud83d\udd27 DEBUG: Skipping unsupported file: image001.gif\n\ud83d\udd27 DEBUG: Checking attachment: Workers_Compensation_Referral_Information_Form_William_Jones_7-10-25.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding Workers_Compensation_Referral_Information_Form_William_Jones_7-10-25.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 509654 bytes\n\ud83d\udd27 DEBUG: Added Workers_Compensation_Referral_Information_Form_William_Jones_7-10-25.pdf to processing list\n\ud83d\udd27 DEBUG: Processing 5 attachments together\n\ud83d\udd27 DEBUG: Calling consolidated extract function...\n\ud83d\udd27 DEBUG: Starting consolidated extraction for 5 files\n\ud83d\udd27 DEBUG: Email body length: 3404 characters\n\ud83d\udd27 DEBUG: OpenAI API Key set: \u2705\n\ud83d\udd27 DEBUG: Processing file 1/5: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 8 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 436912\n\ud83d\udd27 DEBUG: Processing file 2/5: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 2 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 1073872\n\ud83d\udd27 DEBUG: Processing file 3/5: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 1 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 287856\n\ud83d\udd27 DEBUG: Processing file 4/5: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 2 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 508160\n\ud83d\udd27 DEBUG: Processing file 5/5: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 1 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 323004\n\ud83d\udd27 DEBUG: Prepared content with 6 items (1 text + 5 images)\n\ud83d\udd27 DEBUG: Preparing OpenAI API call...\ud83d\ude80 Starting archive process...\n\u2705 Successfully archived 0 directories to data\\emails\\archive\n\n\ud83d\udd27 DEBUG: Using model: gpt-4o-mini\n\ud83d\udd27 DEBUG: Max tokens: 2048\n\ud83d\udd27 DEBUG: Making OpenAI API call...\n\ud83d\udd27 DEBUG: OpenAI API call completed\n\ud83d\udd27 DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>\n\ud83d\udd27 DEBUG: Number of choices: 1\n\ud83d\udd27 DEBUG: Response content length: 1550\n\ud83d\udd27 DEBUG: Response content preview: ```json\n{\n  \"referral\": true,\n  \"employer_address\": \"117 W. Duval Street, Suite 335, Jacksonville, FL 32202\",\n  \"employer_email\": \"bcapers@coj.net\",\n  \"injury_description\": \"While working a traffic cr...\n\ud83d\udd27 DEBUG: Attempting to parse JSON...\n\ud83d\udd27 DEBUG: JSON parsing successful\n\ud83d\udd27 DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']\n\ud83d\udd27 DEBUG: Consolidated extraction completed successfully\n\u274c Database update failed for 20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724: 39 values for 38 columns\n\u274c Failed to update database for 20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724\n\ud83d\udd27 DEBUG: Processing directory: 20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-\n\ud83d\udd27 DEBUG: Checking required files...\n\ud83d\udd27 DEBUG: Summary file exists: True\n\ud83d\udd27 DEBUG: Metadata file exists: True\n\ud83d\udd27 DEBUG: Attachments dir exists: True\n\ud83d\udd27 DEBUG: Loading JSON files...\n\ud83d\udd27 DEBUG: JSON files loaded successfully\n\ud83d\udd27 DEBUG: Email text length: 4078 characters\n\ud83d\udd27 DEBUG: Found 1 attachments\n\ud83d\udd27 DEBUG: Checking attachment: Wemheuer_william_MRI_order_07082025.pdf\n\ud83d\udd27 DEBUG: Attachment suffix: .pdf\n\ud83d\udd27 DEBUG: Supported file type: True\n\ud83d\udd0d Adding Wemheuer_william_MRI_order_07082025.pdf to consolidated processing\n\ud83d\udd27 DEBUG: Reading file bytes...\n\ud83d\udd27 DEBUG: File size: 990787 bytes\n\ud83d\udd27 DEBUG: Added Wemheuer_william_MRI_order_07082025.pdf to processing list\n\ud83d\udd27 DEBUG: Processing 1 attachments together\n\ud83d\udd27 DEBUG: Calling consolidated extract function...\n\ud83d\udd27 DEBUG: Starting consolidated extraction for 1 files\n\ud83d\udd27 DEBUG: Email body length: 4078 characters\n\ud83d\udd27 DEBUG: OpenAI API Key set: \u2705\n\ud83d\udd27 DEBUG: Processing file 1/1: .pdf\n\ud83d\udd27 DEBUG: Converting PDF to images...\n\ud83d\udd27 DEBUG: PDF converted to 1 page(s)\n\ud83d\udd27 DEBUG: Added PDF page, base64 length: 574824\n\ud83d\udd27 DEBUG: Prepared content with 2 items (1 text + 1 images)\n\ud83d\udd27 DEBUG: Preparing OpenAI API call...\n\ud83d\udd27 DEBUG: Using model: gpt-4o-mini\n\ud83d\udd27 DEBUG: Max tokens: 2048\n\ud83d\udd27 DEBUG: Making OpenAI API call...\n\ud83d\udd27 DEBUG: OpenAI API call completed\n\ud83d\udd27 DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>\n\ud83d\udd27 DEBUG: Number of choices: 1\n\ud83d\udd27 DEBUG: Response content length: 1419\n\ud83d\udd27 DEBUG: Response content preview: ```json\n{\n  \"referral\": true,\n  \"employer_address\": null,\n  \"employer_email\": null,\n  \"injury_description\": \"Work related injury to knee and hip\",\n  \"diagnosis_code\": [\"Y99.0\", \"M25.562\", \"M25.552\"],\n...\n\ud83d\udd27 DEBUG: Attempting to parse JSON...\n\ud83d\udd27 DEBUG: JSON parsing successful\n\ud83d\udd27 DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']\n\ud83d\udd27 DEBUG: Consolidated extraction completed successfully\n\u274c Database update failed for 20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-: 39 values for 38 columns\n\u274c Failed to update database for 20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-\n\ud83d\udd27 DEBUG: Processing directory: archive\n\ud83d\udd27 DEBUG: Checking required files...\n\ud83d\udd27 DEBUG: Summary file exists: False\n\ud83d\udd27 DEBUG: Metadata file exists: False\n\ud83d\udd27 DEBUG: Attachments dir exists: False\n\u26a0\ufe0f  Missing summary or metadata in archive, skipping\n\u2705 Successfully processed 0/11 directories\n\ud83d\udd17 Database connection closed\n\n\ud83d\udce6 Archiving processed emails...\n",
      "error": ""
    },
    {
      "name": "Address Geocoding",
      "start_time": "2025-07-18T15:30:47.090640",
      "command": "C:\\Users\\ChristopherCato\\AppData\\Local\\Programs\\Python\\Python313\\python.exe scripts/geocode_addresses.py",
      "success": true,
      "duration_seconds": 0.959874,
      "output": "\ud83d\uddfa\ufe0f  Starting geocoding process...\n   Database: intake-crm.db\n   Force refresh: False\n   Dry run: False\n\u2705 Created location index\n\u2705 No addresses need geocoding\n",
      "error": ""
    },
    {
      "name": "S3 Document Upload",
      "start_time": "2025-07-18T15:30:50.052768",
      "command": "C:\\Users\\ChristopherCato\\AppData\\Local\\Programs\\Python\\Python313\\python.exe scripts/upload_docs_to_s3.py",
      "success": true,
      "duration_seconds": 14.804284,
      "output": "\ud83d\udd17 Connected to S3 bucket: intake-crm-prod\n\ud83d\udcc1 Scanning directory: data\\emails\n\ud83d\udccb Found 11 directories\n\ud83d\udce4 Will process 11 directories\n\n\ud83d\ude80 Starting upload of 11 directories...\n\n\ud83d\udce4 [1/11] Uploading: 20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061\n\ud83d\udce4 Uploading email directory: data\\emails\\20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061\n   S3 prefix: data/20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061\n   \u2705 email_metadata.json\n   \u2705 summary.json\n   \u2705 attachments\\Document.pdf\n   \u2705 attachments\\image269152.png\n   \u2705 attachments\\image322368.png\n   \u2705 attachments\\image518828.png\n   \u2705 attachments\\image589009.png\n   \u2705 attachments\\MedicalReportForm2.pdf\n   \u2705 attachments\\MedicalReportingForm.pdf\n   \ud83d\udccb Upload manifest: data/20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061/upload_manifest.json\n\u2705 Successfully uploaded 9 files\n\n\ud83d\udce4 [2/11] Uploading: 20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535\n\ud83d\udce4 Uploading email directory: data\\emails\\20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535\n   S3 prefix: data/20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535\n   \u2705 email_metadata.json\n   \u2705 summary.json\n   \u2705 attachments\\image001.png\n   \u2705 attachments\\Stephanie_Abel_FROI.pdf\n   \u2705 attachments\\Stephanie_Abel_L_Knee_MRI_Order_Murphy_6-26-25.pdf\n   \u2705 attachments\\Stephanie_Abel_REF_2.docx\n   \ud83d\udccb Upload manifest: data/20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535/upload_manifest.json\n\u2705 Successfully uploaded 6 files\n\n\ud83d\udce4 [3/11] Uploading: 20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge\n\ud83d\udce4 Uploading email directory: data\\emails\\20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge\n   S3 prefix: data/20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge\n   \u2705 email_metadata.json\n   \u2705 summary.json\n   \u2705 attachments\\Cert_JorCru_03-28-2025.pdf\n   \u2705 attachments\\image001.png\n   \u2705 attachments\\image002.jpg\n   \u2705 attachments\\image003.png\n   \u2705 attachments\\image004.png\n   \ud83d\udccb Upload manifest: data/20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge/upload_manifest.json\n\u2705 Successfully uploaded 7 files\n\n\ud83d\udce4 [4/11] Uploading: 20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373\n\ud83d\udce4 Uploading email directory: data\\emails\\20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373\n   S3 prefix: data/20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373\n   \u2705 email_metadata.json\n   \u2705 summary.json\n   \u2705 attachments\\image001.png\n   \u2705 attachments\\image003.png\n   \u2705 attachments\\NOI.pdf\n   \u2705 attachments\\N_Rangel_MRI_L_knee_RX.pdf\n   \ud83d\udccb Upload manifest: data/20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373/upload_manifest.json\n\u2705 Successfully uploaded 6 files\n\n\ud83d\udce4 [5/11] Uploading: 20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS\n\ud83d\udce4 Uploading email directory: data\\emails\\20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS\n   S3 prefix: data/20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS\n   \u2705 email_metadata.json\n   \u2705 summary.json\n   \u2705 attachments\\First_Report_of_Injury_or_Illness_LMills.pdf\n   \u2705 attachments\\image001.png\n   \u2705 attachments\\MRI_Referral_LaNarria_Mills.pdf\n   \u2705 attachments\\Workers_Comp_Referral_Information-LaNarria_Wells.docx\n   \ud83d\udccb Upload manifest: data/20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS/upload_manifest.json\n\u2705 Successfully uploaded 6 files\n\n\ud83d\udce4 [6/11] Uploading: 20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah\n\ud83d\udce4 Uploading email directory: data\\emails\\20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah\n   S3 prefix: data/20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah\n   \u2705 email_metadata.json\n   \u2705 summary.json\n   \u2705 attachments\\FROI_SP.pdf\n   \u2705 attachments\\image001.jpg\n   \u2705 attachments\\mri_script.pdf\n   \ud83d\udccb Upload manifest: data/20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah/upload_manifest.json\n\u2705 Successfully uploaded 5 files\n\n\ud83d\udce4 [7/11] Uploading: 20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO\n\ud83d\udce4 Uploading email directory: data\\emails\\20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO\n   S3 prefix: data/20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO\n   \u2705 email_metadata.json\n   \u2705 summary.json\n   \u2705 attachments\\DO-01-3471-163_07-10-2025-08-56.pdf\n   \u2705 attachments\\image001.png\n   \u2705 attachments\\image003.png\n   \u2705 attachments\\image004.png\n   \u2705 attachments\\image005.png\n   \u2705 attachments\\image007.png\n   \u2705 attachments\\image008.png\n   \u2705 attachments\\image009.png\n   \ud83d\udccb Upload manifest: data/20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO/upload_manifest.json\n\u2705 Successfully uploaded 10 files\n\n\ud83d\udce4 [8/11] Uploading: 20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_\n\ud83d\udce4 Uploading email directory: data\\emails\\20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_\n   S3 prefix: data/20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_\n   \u2705 email_metadata.json\n   \u2705 summary.json\n   \u2705 attachments\\07-08-25_Jackson_James_Imaging-Ref.pdf\n   \u2705 attachments\\4-11-25_FIRST_REPORT_OF_INJURY_-_JAMES_JACKSON.pdf\n   \u2705 attachments\\image001.png\n   \ud83d\udccb Upload manifest: data/20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_/upload_manifest.json\n\u2705 Successfully uploaded 5 files\n\n\ud83d\udce4 [9/11] Uploading: 20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724\n\ud83d\udce4 Uploading email directory: data\\emails\\20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724\n   S3 prefix: data/20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724\n   \u2705 email_metadata.json\n   \u2705 summary.json\n   \u2705 attachments\\Amelia_Urgent_Care_DWC-25_7-9-25.pdf\n   \u2705 attachments\\Amelia_Urgent_Care_MRI_RightKnee_Without_Contrast_Referral_7-9-25.pdf\n   \u2705 attachments\\Amelia_Urgent_Care__7-9-25.pdf\n   \u2705 attachments\\First_Report_of_Injury_or_Illness_-_2025-07-10T070738.159.pdf\n   \u2705 attachments\\image001.gif\n   \u2705 attachments\\Workers_Compensation_Referral_Information_Form_William_Jones_7-10-25.pdf\n   \ud83d\udccb Upload manifest: data/20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724/upload_manifest.json\n\u2705 Successfully uploaded 8 files\n\n\ud83d\udce4 [10/11] Uploading: 20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-\n\ud83d\udce4 Uploading email directory: data\\emails\\20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-\n   S3 prefix: data/20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-\n   \u2705 email_metadata.json\n   \u2705 summary.json\n   \u2705 attachments\\Wemheuer_william_MRI_order_07082025.pdf\n   \ud83d\udccb Upload manifest: data/20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-/upload_manifest.json\n\u2705 Successfully uploaded 3 files\n\n\ud83d\udce4 [11/11] Uploading: archive\n\ud83d\udce4 Uploading email directory: data\\emails\\archive\n   S3 prefix: data/archive\n   \u2705 20250627_162806_AAMkADBlMGM0OTU0LTJk_Workers_Compensation_Claim_WC2\\email_metadata.json\n   \u2705 20250627_162806_AAMkADBlMGM0OTU0LTJk_Workers_Compensation_Claim_WC2\\extracted.json\n   \u2705 20250627_162806_AAMkADBlMGM0OTU0LTJk_Workers_Compensation_Claim_WC2\\summary.json\n   \u2705 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\\email_metadata.json\n   \u2705 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\\extracted.json\n   \u2705 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\\summary.json\n   \u2705 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\\email_metadata.json\n   \u2705 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\\extracted.json\n   \u2705 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\\summary.json\n   \u2705 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\\email_metadata.json\n   \u2705 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\\extracted.json\n   \u2705 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\\summary.json\n   \u2705 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\\attachments\\AdjusterCM-Contact-Auth-Request.pdf\n   \u2705 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\\attachments\\image001.png\n   \u2705 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\\attachments\\image002.png\n   \u2705 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\\attachments\\image003.png\n   \u2705 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\\attachments\\image004.png\n   \u2705 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\\attachments\\Demographics_Carmelo.png\n   \u2705 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\\attachments\\image001.png\n   \u2705 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\\attachments\\MRI_Referral_Carmelo.pdf\n   \u2705 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\\attachments\\AdjusterCM-Contact-Auth-Request.pdf\n   \u2705 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\\attachments\\image001.png\n   \u2705 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\\attachments\\image002.png\n   \u2705 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\\attachments\\image003.png\n   \u2705 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\\attachments\\image004.png\n   \u2705 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\\attachments\\VOECHTING.docx\n   \u2705 20250627_162806_AAMkADBlMGM0OTU0LTJk_Workers_Compensation_Claim_WC2\\attachments\\image001.png\n   \u2705 20250627_162806_AAMkADBlMGM0OTU0LTJk_Workers_Compensation_Claim_WC2\\attachments\\PatientReferralReport_PATRICIACLAGUE_06-26-2025.pdf\n   \ud83d\udccb Upload manifest: data/archive/upload_manifest.json\n\u2705 Successfully uploaded 28 files\n\n\ud83d\udcca Upload Summary:\n   \u2705 Successful: 11\n   \u274c Failed: 0\n   \ud83d\udcc1 Total: 11\n\n\ud83c\udf89 Successfully uploaded 11 directories to S3!\n   Bucket: intake-crm-prod\n   Structure: intake-crm-prod/data/{email_id}/\n",
      "error": ""
    },
    {
      "name": "Database Ingestion",
      "start_time": "2025-07-18T15:31:06.860767",
      "command": "C:\\Users\\ChristopherCato\\AppData\\Local\\Programs\\Python\\Python313\\python.exe scripts/ingest_to_db.py",
      "success": true,
      "duration_seconds": 0.098157,
      "output": "\ud83d\udd27 Creating/connecting to database: intake-crm.db\n\ud83d\ude80 Processing 11 email directories\n\u26a0\ufe0f  No extracted.json found in 20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061\n\u26a0\ufe0f  No extracted.json found in 20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535\n\u26a0\ufe0f  No extracted.json found in 20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge\n\u26a0\ufe0f  No extracted.json found in 20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373\n\u26a0\ufe0f  No extracted.json found in 20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS\n\u26a0\ufe0f  No extracted.json found in 20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah\n\u26a0\ufe0f  No extracted.json found in 20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO\n\u26a0\ufe0f  No extracted.json found in 20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_\n\u26a0\ufe0f  No extracted.json found in 20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724\n\u26a0\ufe0f  No extracted.json found in 20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-\n\u26a0\ufe0f  No extracted.json found in archive\n\u2705 Successfully processed 0/11 directories\n",
      "error": ""
    },
    {
      "name": "Email Archiving",
      "start_time": "2025-07-18T15:31:08.961769",
      "command": "C:\\Users\\ChristopherCato\\AppData\\Local\\Programs\\Python\\Python313\\python.exe scripts/archive_processed_emails.py",
      "success": true,
      "duration_seconds": 0.090743,
      "output": "\ud83d\ude80 Starting archive process...\n\u2705 Successfully archived 0 directories to data\\emails\\archive\n",
      "error": ""
    }
  ],
  "total_emails_processed": 0,
  "total_errors": 0,
  "success": true,
  "end_time": "2025-07-18T15:31:11.053247",
  "total_duration_seconds": 196.537254
}