2025-07-18 15:27:54,517 - INFO - [STARTING] Automated pipeline at 2025-07-18 15:27:54.515993
2025-07-18 15:27:54,517 - INFO - [LOG] Log file: logs\pipeline_20250718_152754.log
2025-07-18 15:27:54,517 - INFO - ğŸ” Checking prerequisites...
2025-07-18 15:27:54,518 - INFO - âœ… All prerequisites satisfied
2025-07-18 15:27:54,518 - INFO - ğŸš€ Starting automated email processing pipeline
2025-07-18 15:27:54,518 - INFO - ğŸ”„ Starting step: Email Ingestion
2025-07-18 15:27:54,518 - INFO - ğŸ“‹ Command: C:\Users\ChristopherCato\AppData\Local\Programs\Python\Python313\python.exe scripts/run_email_ingestion.py --max-emails 1 --action fetch --folder Intake
2025-07-18 15:27:59,353 - INFO - âœ… Email Ingestion completed successfully in 4.8s
2025-07-18 15:27:59,354 - INFO - ğŸ“¤ Output: ğŸš€ Email Ingestion Tool
   Mailbox: assignment@clarity-dx.com
   Folder: Inbox/Intake
   Action: fetch
   Filter: Original inbound only

ğŸ“§ Fetching emails...
ğŸ” Looking for messages in assignment@clarity-dx.com/Inbox/Intake
ğŸ“ Source folder ID: AQMkADBlMGM0OTU0LTJkOWUtNDFiNi1hMTkzLWZiYTUzZGNhNmQ3NQAuAAADqejEcgLQRkOEx9g2AE2OvQEAXEGTY4P1bkO8jpnh-Gd17wAFKQYJGwAAAA==
ğŸ“ Destination folder ID: AQMkADBlMGM0OTU0LTJkOWUtNDFiNi1hMTkzLWZiYTUzZGNhNmQ3NQAuAAADqejEcgLQRkOEx9g2AE2OvQEAXEGTY4P1bkO8jpnh-Gd17wAFKQYJHAAAAA==

ğŸ“Š Summary:
- Total messages found: 0
- Original inbound emails: 0
- Skipped replies/forwards: 0
- Failed to process: 0
- Total attachments: 0
- Data saved to: data\emails

âœ… Email fetching completed!
   Processed: 0 emails
   Attachments: 0 files
   Saved to: data\emails

ğŸ‰ All done!
2025-07-18 15:28:01,355 - INFO - ğŸ”„ Starting step: LLM Data Extraction
2025-07-18 15:28:01,355 - INFO - ğŸ“‹ Command: C:\Users\ChristopherCato\AppData\Local\Programs\Python\Python313\python.exe scripts/run_llm_extraction.py --archive
2025-07-18 15:30:45,075 - INFO - âœ… LLM Data Extraction completed successfully in 163.7s
2025-07-18 15:30:45,075 - INFO - ğŸ“¤ Output: ğŸ”§ DEBUG: Using 33 fields from sample: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']
ğŸ”— Connecting to database: intake-crm.db
âœ… Database connection established
ğŸš€ Running extraction on 11 directories
ğŸ”§ DEBUG: Processing directory: 20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061
ğŸ”§ DEBUG: Checking required files...
ğŸ”§ DEBUG: Summary file exists: True
ğŸ”§ DEBUG: Metadata file exists: True
ğŸ”§ DEBUG: Attachments dir exists: True
ğŸ”§ DEBUG: Loading JSON files...
ğŸ”§ DEBUG: JSON files loaded successfully
ğŸ”§ DEBUG: Email text length: 10349 characters
ğŸ”§ DEBUG: Found 7 attachments
ğŸ”§ DEBUG: Checking attachment: Document.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding Document.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 117046 bytes
ğŸ”§ DEBUG: Added Document.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: image269152.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image269152.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 1823 bytes
ğŸ”§ DEBUG: Added image269152.png to processing list
ğŸ”§ DEBUG: Checking attachment: image322368.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image322368.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 572 bytes
ğŸ”§ DEBUG: Added image322368.png to processing list
ğŸ”§ DEBUG: Checking attachment: image518828.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image518828.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 773 bytes
ğŸ”§ DEBUG: Added image518828.png to processing list
ğŸ”§ DEBUG: Checking attachment: image589009.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image589009.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 495 bytes
ğŸ”§ DEBUG: Added image589009.png to processing list
ğŸ”§ DEBUG: Checking attachment: MedicalReportForm2.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding MedicalReportForm2.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 4731905 bytes
ğŸ”§ DEBUG: Added MedicalReportForm2.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: MedicalReportingForm.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding MedicalReportingForm.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 4577665 bytes
ğŸ”§ DEBUG: Added MedicalReportingForm.pdf to processing list
ğŸ”§ DEBUG: Processing 7 attachments together
ğŸ”§ DEBUG: Calling consolidated extract function...
ğŸ”§ DEBUG: Starting consolidated extraction for 7 files
ğŸ”§ DEBUG: Email body length: 10349 characters
ğŸ”§ DEBUG: OpenAI API Key set: âœ…
ğŸ”§ DEBUG: Processing file 1/7: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 2 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 513980
ğŸ”§ DEBUG: Processing file 2/7: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 2432
ğŸ”§ DEBUG: Processing file 3/7: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 764
ğŸ”§ DEBUG: Processing file 4/7: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 1032
ğŸ”§ DEBUG: Processing file 5/7: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 660
ğŸ”§ DEBUG: Processing file 6/7: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 1 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 693108
ğŸ”§ DEBUG: Processing file 7/7: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 1 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 655932
ğŸ”§ DEBUG: Prepared content with 8 items (1 text + 7 images)
ğŸ”§ DEBUG: Preparing OpenAI API call...
ğŸ”§ DEBUG: Using model: gpt-4o-mini
ğŸ”§ DEBUG: Max tokens: 2048
ğŸ”§ DEBUG: Making OpenAI API call...
ğŸ”§ DEBUG: OpenAI API call completed
ğŸ”§ DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>
ğŸ”§ DEBUG: Number of choices: 1
ğŸ”§ DEBUG: Response content length: 1331
ğŸ”§ DEBUG: Response content preview: ```json
{
  "referral": true,
  "employer_address": "P.O. Box 110279, BRADENTON, FL 342110004",
  "employer_email": null,
  "injury_description": "Employee was playing soccer, injured left knee.",
  "...
ğŸ”§ DEBUG: Attempting to parse JSON...
ğŸ”§ DEBUG: JSON parsing successful
ğŸ”§ DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']
ğŸ”§ DEBUG: Consolidated extraction completed successfully
âŒ Database update failed for 20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061: 39 values for 38 columns
âŒ Failed to update database for 20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061
ğŸ”§ DEBUG: Processing directory: 20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535
ğŸ”§ DEBUG: Checking required files...
ğŸ”§ DEBUG: Summary file exists: True
ğŸ”§ DEBUG: Metadata file exists: True
ğŸ”§ DEBUG: Attachments dir exists: True
ğŸ”§ DEBUG: Loading JSON files...
ğŸ”§ DEBUG: JSON files loaded successfully
ğŸ”§ DEBUG: Email text length: 4589 characters
ğŸ”§ DEBUG: Found 4 attachments
ğŸ”§ DEBUG: Checking attachment: image001.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image001.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 1199302 bytes
ğŸ”§ DEBUG: Added image001.png to processing list
ğŸ”§ DEBUG: Checking attachment: Stephanie_Abel_FROI.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding Stephanie_Abel_FROI.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 93608 bytes
ğŸ”§ DEBUG: Added Stephanie_Abel_FROI.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: Stephanie_Abel_L_Knee_MRI_Order_Murphy_6-26-25.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding Stephanie_Abel_L_Knee_MRI_Order_Murphy_6-26-25.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 1404807 bytes
ğŸ”§ DEBUG: Added Stephanie_Abel_L_Knee_MRI_Order_Murphy_6-26-25.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: Stephanie_Abel_REF_2.docx
ğŸ”§ DEBUG: Attachment suffix: .docx
ğŸ”§ DEBUG: Supported file type: False
ğŸ”§ DEBUG: Skipping unsupported file: Stephanie_Abel_REF_2.docx
ğŸ”§ DEBUG: Processing 3 attachments together
ğŸ”§ DEBUG: Calling consolidated extract function...
ğŸ”§ DEBUG: Starting consolidated extraction for 3 files
ğŸ”§ DEBUG: Email body length: 4589 characters
ğŸ”§ DEBUG: OpenAI API Key set: âœ…
ğŸ”§ DEBUG: Processing file 1/3: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 1599072
ğŸ”§ DEBUG: Processing file 2/3: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 2 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 498176
ğŸ”§ DEBUG: Processing file 3/3: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 1 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 505096
ğŸ”§ DEBUG: Prepared content with 4 items (1 text + 3 images)
ğŸ”§ DEBUG: Preparing OpenAI API call...
ğŸ”§ DEBUG: Using model: gpt-4o-mini
ğŸ”§ DEBUG: Max tokens: 2048
ğŸ”§ DEBUG: Making OpenAI API call...
ğŸ”§ DEBUG: OpenAI API call completed
ğŸ”§ DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>
ğŸ”§ DEBUG: Number of choices: 1
ğŸ”§ DEBUG: Response content length: 1525
ğŸ”§ DEBUG: Response content preview: ```json
{
  "referral": true,
  "employer_address": "8083 Parramore Rd\nJacksonville, FL 32244",
  "employer_email": null,
  "injury_description": "Officer was kicked in the knee by suspect while tryi...
ğŸ”§ DEBUG: Attempting to parse JSON...
ğŸ”§ DEBUG: JSON parsing successful
ğŸ”§ DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']
ğŸ”§ DEBUG: Consolidated extraction completed successfully
âŒ Database update failed for 20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535: 39 values for 38 columns
âŒ Failed to update database for 20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535
ğŸ”§ DEBUG: Processing directory: 20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge
ğŸ”§ DEBUG: Checking required files...
ğŸ”§ DEBUG: Summary file exists: True
ğŸ”§ DEBUG: Metadata file exists: True
ğŸ”§ DEBUG: Attachments dir exists: True
ğŸ”§ DEBUG: Loading JSON files...
ğŸ”§ DEBUG: JSON files loaded successfully
ğŸ”§ DEBUG: Email text length: 3596 characters
ğŸ”§ DEBUG: Found 5 attachments
ğŸ”§ DEBUG: Checking attachment: Cert_JorCru_03-28-2025.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding Cert_JorCru_03-28-2025.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 215642 bytes
ğŸ”§ DEBUG: Added Cert_JorCru_03-28-2025.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: image001.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image001.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 10960 bytes
ğŸ”§ DEBUG: Added image001.png to processing list
ğŸ”§ DEBUG: Checking attachment: image002.jpg
ğŸ”§ DEBUG: Attachment suffix: .jpg
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image002.jpg to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 2912 bytes
ğŸ”§ DEBUG: Added image002.jpg to processing list
ğŸ”§ DEBUG: Checking attachment: image003.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image003.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 10410 bytes
ğŸ”§ DEBUG: Added image003.png to processing list
ğŸ”§ DEBUG: Checking attachment: image004.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image004.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 17038 bytes
ğŸ”§ DEBUG: Added image004.png to processing list
ğŸ”§ DEBUG: Processing 5 attachments together
ğŸ”§ DEBUG: Calling consolidated extract function...
ğŸ”§ DEBUG: Starting consolidated extraction for 5 files
ğŸ”§ DEBUG: Email body length: 3596 characters
ğŸ”§ DEBUG: OpenAI API Key set: âœ…
ğŸ”§ DEBUG: Processing file 1/5: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 2 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 350004
ğŸ”§ DEBUG: Processing file 2/5: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 14616
ğŸ”§ DEBUG: Processing file 3/5: .jpg
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 3884
ğŸ”§ DEBUG: Processing file 4/5: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 13880
ğŸ”§ DEBUG: Processing file 5/5: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 22720
ğŸ”§ DEBUG: Prepared content with 6 items (1 text + 5 images)
ğŸ”§ DEBUG: Preparing OpenAI API call...
ğŸ”§ DEBUG: Using model: gpt-4o-mini
ğŸ”§ DEBUG: Max tokens: 2048
ğŸ”§ DEBUG: Making OpenAI API call...
ğŸ”§ DEBUG: OpenAI API call completed
ğŸ”§ DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>
ğŸ”§ DEBUG: Number of choices: 1
ğŸ”§ DEBUG: Response content length: 1269
ğŸ”§ DEBUG: Response content preview: ```json
{
  "referral": true,
  "employer_address": "2 East Main Street, Ste. 208, Danville, IL 61832",
  "employer_email": "fong.moua@ccmsi.com",
  "injury_description": "Bilateral Lower Extremities"...
ğŸ”§ DEBUG: Attempting to parse JSON...
ğŸ”§ DEBUG: JSON parsing successful
ğŸ”§ DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']
ğŸ”§ DEBUG: Consolidated extraction completed successfully
âŒ Database update failed for 20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge: 39 values for 38 columns
âŒ Failed to update database for 20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge
ğŸ”§ DEBUG: Processing directory: 20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373
ğŸ”§ DEBUG: Checking required files...
ğŸ”§ DEBUG: Summary file exists: True
ğŸ”§ DEBUG: Metadata file exists: True
ğŸ”§ DEBUG: Attachments dir exists: True
ğŸ”§ DEBUG: Loading JSON files...
ğŸ”§ DEBUG: JSON files loaded successfully
ğŸ”§ DEBUG: Email text length: 3745 characters
ğŸ”§ DEBUG: Found 4 attachments
ğŸ”§ DEBUG: Checking attachment: image001.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image001.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 6742 bytes
ğŸ”§ DEBUG: Added image001.png to processing list
ğŸ”§ DEBUG: Checking attachment: image003.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image003.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 3832 bytes
ğŸ”§ DEBUG: Added image003.png to processing list
ğŸ”§ DEBUG: Checking attachment: N_Rangel_MRI_L_knee_RX.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding N_Rangel_MRI_L_knee_RX.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 91428 bytes
ğŸ”§ DEBUG: Added N_Rangel_MRI_L_knee_RX.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: NOI.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding NOI.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 119676 bytes
ğŸ”§ DEBUG: Added NOI.pdf to processing list
ğŸ”§ DEBUG: Processing 4 attachments together
ğŸ”§ DEBUG: Calling consolidated extract function...
ğŸ”§ DEBUG: Starting consolidated extraction for 4 files
ğŸ”§ DEBUG: Email body length: 3745 characters
ğŸ”§ DEBUG: OpenAI API Key set: âœ…
ğŸ”§ DEBUG: Processing file 1/4: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 8992
ğŸ”§ DEBUG: Processing file 2/4: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 5112
ğŸ”§ DEBUG: Processing file 3/4: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 3 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 763480
ğŸ”§ DEBUG: Processing file 4/4: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 2 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 563312
ğŸ”§ DEBUG: Prepared content with 5 items (1 text + 4 images)
ğŸ”§ DEBUG: Preparing OpenAI API call...
ğŸ”§ DEBUG: Using model: gpt-4o-mini
ğŸ”§ DEBUG: Max tokens: 2048
ğŸ”§ DEBUG: Making OpenAI API call...
ğŸ”§ DEBUG: OpenAI API call completed
ğŸ”§ DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>
ğŸ”§ DEBUG: Number of choices: 1
ğŸ”§ DEBUG: Response content length: 1322
ğŸ”§ DEBUG: Response content preview: ```json
{
  "referral": true,
  "employer_address": "1960 LANDING BLVD, SARASOTA, FL 34231",
  "employer_email": null,
  "injury_description": "Worker was cleaning the restroom; she tripped and fell o...
ğŸ”§ DEBUG: Attempting to parse JSON...
ğŸ”§ DEBUG: JSON parsing successful
ğŸ”§ DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']
ğŸ”§ DEBUG: Consolidated extraction completed successfully
âŒ Database update failed for 20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373: 39 values for 38 columns
âŒ Failed to update database for 20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373
ğŸ”§ DEBUG: Processing directory: 20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS
ğŸ”§ DEBUG: Checking required files...
ğŸ”§ DEBUG: Summary file exists: True
ğŸ”§ DEBUG: Metadata file exists: True
ğŸ”§ DEBUG: Attachments dir exists: True
ğŸ”§ DEBUG: Loading JSON files...
ğŸ”§ DEBUG: JSON files loaded successfully
ğŸ”§ DEBUG: Email text length: 6030 characters
ğŸ”§ DEBUG: Found 4 attachments
ğŸ”§ DEBUG: Checking attachment: First_Report_of_Injury_or_Illness_LMills.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding First_Report_of_Injury_or_Illness_LMills.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 112402 bytes
ğŸ”§ DEBUG: Added First_Report_of_Injury_or_Illness_LMills.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: image001.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image001.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 14001 bytes
ğŸ”§ DEBUG: Added image001.png to processing list
ğŸ”§ DEBUG: Checking attachment: MRI_Referral_LaNarria_Mills.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding MRI_Referral_LaNarria_Mills.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 117501 bytes
ğŸ”§ DEBUG: Added MRI_Referral_LaNarria_Mills.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: Workers_Comp_Referral_Information-LaNarria_Wells.docx
ğŸ”§ DEBUG: Attachment suffix: .docx
ğŸ”§ DEBUG: Supported file type: False
ğŸ”§ DEBUG: Skipping unsupported file: Workers_Comp_Referral_Information-LaNarria_Wells.docx
ğŸ”§ DEBUG: Processing 3 attachments together
ğŸ”§ DEBUG: Calling consolidated extract function...
ğŸ”§ DEBUG: Starting consolidated extraction for 3 files
ğŸ”§ DEBUG: Email body length: 6030 characters
ğŸ”§ DEBUG: OpenAI API Key set: âœ…
ğŸ”§ DEBUG: Processing file 1/3: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 2 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 564200
ğŸ”§ DEBUG: Processing file 2/3: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 18668
ğŸ”§ DEBUG: Processing file 3/3: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 1 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 225172
ğŸ”§ DEBUG: Prepared content with 4 items (1 text + 3 images)
ğŸ”§ DEBUG: Preparing OpenAI API call...
ğŸ”§ DEBUG: Using model: gpt-4o-mini
ğŸ”§ DEBUG: Max tokens: 2048
ğŸ”§ DEBUG: Making OpenAI API call...
ğŸ”§ DEBUG: OpenAI API call completed
ğŸ”§ DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>
ğŸ”§ DEBUG: Number of choices: 1
ğŸ”§ DEBUG: Response content length: 1539
ğŸ”§ DEBUG: Response content preview: ```json
{
  "referral": true,
  "employer_address": "117 West Duval Street, Suite 335, Jacksonville, FL 32202",
  "employer_email": null,
  "injury_description": "Unable to obtain time of report. Witn...
ğŸ”§ DEBUG: Attempting to parse JSON...
ğŸ”§ DEBUG: JSON parsing successful
ğŸ”§ DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']
ğŸ”§ DEBUG: Consolidated extraction completed successfully
âŒ Database update failed for 20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS: 39 values for 38 columns
âŒ Failed to update database for 20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS
ğŸ”§ DEBUG: Processing directory: 20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah
ğŸ”§ DEBUG: Checking required files...
ğŸ”§ DEBUG: Summary file exists: True
ğŸ”§ DEBUG: Metadata file exists: True
ğŸ”§ DEBUG: Attachments dir exists: True
ğŸ”§ DEBUG: Loading JSON files...
ğŸ”§ DEBUG: JSON files loaded successfully
ğŸ”§ DEBUG: Email text length: 2221 characters
ğŸ”§ DEBUG: Found 3 attachments
ğŸ”§ DEBUG: Checking attachment: FROI_SP.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding FROI_SP.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 600352 bytes
ğŸ”§ DEBUG: Added FROI_SP.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: image001.jpg
ğŸ”§ DEBUG: Attachment suffix: .jpg
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image001.jpg to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 1931 bytes
ğŸ”§ DEBUG: Added image001.jpg to processing list
ğŸ”§ DEBUG: Checking attachment: mri_script.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding mri_script.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 72765 bytes
ğŸ”§ DEBUG: Added mri_script.pdf to processing list
ğŸ”§ DEBUG: Processing 3 attachments together
ğŸ”§ DEBUG: Calling consolidated extract function...
ğŸ”§ DEBUG: Starting consolidated extraction for 3 files
ğŸ”§ DEBUG: Email body length: 2221 characters
ğŸ”§ DEBUG: OpenAI API Key set: âœ…
ğŸ”§ DEBUG: Processing file 1/3: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 2 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 544460
ğŸ”§ DEBUG: Processing file 2/3: .jpg
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 2576
ğŸ”§ DEBUG: Processing file 3/3: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 1 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 271852
ğŸ”§ DEBUG: Prepared content with 4 items (1 text + 3 images)
ğŸ”§ DEBUG: Preparing OpenAI API call...
ğŸ”§ DEBUG: Using model: gpt-4o-mini
ğŸ”§ DEBUG: Max tokens: 2048
ğŸ”§ DEBUG: Making OpenAI API call...
ğŸ”§ DEBUG: OpenAI API call completed
ğŸ”§ DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>
ğŸ”§ DEBUG: Number of choices: 1
ğŸ”§ DEBUG: Response content length: 1446
ğŸ”§ DEBUG: Response content preview: ```json
{
  "referral": true,
  "employer_address": "P.O. Box 32016 Lakeland, FL 33802",
  "employer_email": null,
  "injury_description": "Sarah's right knee has been hurting and swollen. She is unab...
ğŸ”§ DEBUG: Attempting to parse JSON...
ğŸ”§ DEBUG: JSON parsing successful
ğŸ”§ DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']
ğŸ”§ DEBUG: Consolidated extraction completed successfully
âŒ Database update failed for 20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah: 39 values for 38 columns
âŒ Failed to update database for 20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah
ğŸ”§ DEBUG: Processing directory: 20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO
ğŸ”§ DEBUG: Checking required files...
ğŸ”§ DEBUG: Summary file exists: True
ğŸ”§ DEBUG: Metadata file exists: True
ğŸ”§ DEBUG: Attachments dir exists: True
ğŸ”§ DEBUG: Loading JSON files...
ğŸ”§ DEBUG: JSON files loaded successfully
ğŸ”§ DEBUG: Email text length: 8079 characters
ğŸ”§ DEBUG: Found 8 attachments
ğŸ”§ DEBUG: Checking attachment: DO-01-3471-163_07-10-2025-08-56.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding DO-01-3471-163_07-10-2025-08-56.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 463987 bytes
ğŸ”§ DEBUG: Added DO-01-3471-163_07-10-2025-08-56.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: image001.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image001.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 169 bytes
ğŸ”§ DEBUG: Added image001.png to processing list
ğŸ”§ DEBUG: Checking attachment: image003.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image003.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 8828 bytes
ğŸ”§ DEBUG: Added image003.png to processing list
ğŸ”§ DEBUG: Checking attachment: image004.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image004.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 2765 bytes
ğŸ”§ DEBUG: Added image004.png to processing list
ğŸ”§ DEBUG: Checking attachment: image005.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image005.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 5893 bytes
ğŸ”§ DEBUG: Added image005.png to processing list
ğŸ”§ DEBUG: Checking attachment: image007.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image007.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 121977 bytes
ğŸ”§ DEBUG: Added image007.png to processing list
ğŸ”§ DEBUG: Checking attachment: image008.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image008.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 184 bytes
ğŸ”§ DEBUG: Added image008.png to processing list
ğŸ”§ DEBUG: Checking attachment: image009.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image009.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 174 bytes
ğŸ”§ DEBUG: Added image009.png to processing list
ğŸ”§ DEBUG: Processing 8 attachments together
ğŸ”§ DEBUG: Calling consolidated extract function...
ğŸ”§ DEBUG: Starting consolidated extraction for 8 files
ğŸ”§ DEBUG: Email body length: 8079 characters
ğŸ”§ DEBUG: OpenAI API Key set: âœ…
ğŸ”§ DEBUG: Processing file 1/8: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 8 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 483688
ğŸ”§ DEBUG: Processing file 2/8: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 228
ğŸ”§ DEBUG: Processing file 3/8: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 11772
ğŸ”§ DEBUG: Processing file 4/8: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 3688
ğŸ”§ DEBUG: Processing file 5/8: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 7860
ğŸ”§ DEBUG: Processing file 6/8: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 162636
ğŸ”§ DEBUG: Processing file 7/8: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 248
ğŸ”§ DEBUG: Processing file 8/8: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 232
ğŸ”§ DEBUG: Prepared content with 9 items (1 text + 8 images)
ğŸ”§ DEBUG: Preparing OpenAI API call...
ğŸ”§ DEBUG: Using model: gpt-4o-mini
ğŸ”§ DEBUG: Max tokens: 2048
ğŸ”§ DEBUG: Making OpenAI API call...
ğŸ”§ DEBUG: OpenAI API call completed
ğŸ”§ DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>
ğŸ”§ DEBUG: Number of choices: 1
ğŸ”§ DEBUG: Response content length: 1401
ğŸ”§ DEBUG: Response content preview: ```json
{
  "referral": true,
  "employer_address": "CPC Logistics",
  "employer_email": null,
  "injury_description": "Injury occurred while driving a truck, rear ended by a pick up truck.",
  "diagn...
ğŸ”§ DEBUG: Attempting to parse JSON...
ğŸ”§ DEBUG: JSON parsing successful
ğŸ”§ DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']
ğŸ”§ DEBUG: Consolidated extraction completed successfully
âŒ Database update failed for 20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO: 39 values for 38 columns
âŒ Failed to update database for 20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO
ğŸ”§ DEBUG: Processing directory: 20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_
ğŸ”§ DEBUG: Checking required files...
ğŸ”§ DEBUG: Summary file exists: True
ğŸ”§ DEBUG: Metadata file exists: True
ğŸ”§ DEBUG: Attachments dir exists: True
ğŸ”§ DEBUG: Loading JSON files...
ğŸ”§ DEBUG: JSON files loaded successfully
ğŸ”§ DEBUG: Email text length: 7525 characters
ğŸ”§ DEBUG: Found 3 attachments
ğŸ”§ DEBUG: Checking attachment: 07-08-25_Jackson_James_Imaging-Ref.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding 07-08-25_Jackson_James_Imaging-Ref.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 1246723 bytes
ğŸ”§ DEBUG: Added 07-08-25_Jackson_James_Imaging-Ref.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: 4-11-25_FIRST_REPORT_OF_INJURY_-_JAMES_JACKSON.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding 4-11-25_FIRST_REPORT_OF_INJURY_-_JAMES_JACKSON.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 152760 bytes
ğŸ”§ DEBUG: Added 4-11-25_FIRST_REPORT_OF_INJURY_-_JAMES_JACKSON.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: image001.png
ğŸ”§ DEBUG: Attachment suffix: .png
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding image001.png to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 7876 bytes
ğŸ”§ DEBUG: Added image001.png to processing list
ğŸ”§ DEBUG: Processing 3 attachments together
ğŸ”§ DEBUG: Calling consolidated extract function...
ğŸ”§ DEBUG: Starting consolidated extraction for 3 files
ğŸ”§ DEBUG: Email body length: 7525 characters
ğŸ”§ DEBUG: OpenAI API Key set: âœ…
ğŸ”§ DEBUG: Processing file 1/3: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 1 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 544752
ğŸ”§ DEBUG: Processing file 2/3: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 1 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 625060
ğŸ”§ DEBUG: Processing file 3/3: .png
ğŸ”§ DEBUG: Processing image file directly
ğŸ”§ DEBUG: Image base64 length: 10504
ğŸ”§ DEBUG: Prepared content with 4 items (1 text + 3 images)
ğŸ”§ DEBUG: Preparing OpenAI API call...
ğŸ”§ DEBUG: Using model: gpt-4o-mini
ğŸ”§ DEBUG: Max tokens: 2048
ğŸ”§ DEBUG: Making OpenAI API call...
ğŸ”§ DEBUG: OpenAI API call completed
ğŸ”§ DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>
ğŸ”§ DEBUG: Number of choices: 1
ğŸ”§ DEBUG: Response content length: 1633
ğŸ”§ DEBUG: Response content preview: ```json
{
  "referral": true,
  "employer_address": "P.O. Box 111, Tampa, FL 33601-9111",
  "employer_email": null,
  "injury_description": "discomfort to right elbow indicative of a sprain/strain",
 ...
ğŸ”§ DEBUG: Attempting to parse JSON...
ğŸ”§ DEBUG: JSON parsing successful
ğŸ”§ DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']
ğŸ”§ DEBUG: Consolidated extraction completed successfully
âŒ Database update failed for 20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_: 39 values for 38 columns
âŒ Failed to update database for 20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_
ğŸ”§ DEBUG: Processing directory: 20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724
ğŸ”§ DEBUG: Checking required files...
ğŸ”§ DEBUG: Summary file exists: True
ğŸ”§ DEBUG: Metadata file exists: True
ğŸ”§ DEBUG: Attachments dir exists: True
ğŸ”§ DEBUG: Loading JSON files...
ğŸ”§ DEBUG: JSON files loaded successfully
ğŸ”§ DEBUG: Email text length: 3404 characters
ğŸ”§ DEBUG: Found 6 attachments
ğŸ”§ DEBUG: Checking attachment: Amelia_Urgent_Care__7-9-25.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding Amelia_Urgent_Care__7-9-25.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 435464 bytes
ğŸ”§ DEBUG: Added Amelia_Urgent_Care__7-9-25.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: Amelia_Urgent_Care_DWC-25_7-9-25.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding Amelia_Urgent_Care_DWC-25_7-9-25.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 202998 bytes
ğŸ”§ DEBUG: Added Amelia_Urgent_Care_DWC-25_7-9-25.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: Amelia_Urgent_Care_MRI_RightKnee_Without_Contrast_Referral_7-9-25.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding Amelia_Urgent_Care_MRI_RightKnee_Without_Contrast_Referral_7-9-25.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 27091 bytes
ğŸ”§ DEBUG: Added Amelia_Urgent_Care_MRI_RightKnee_Without_Contrast_Referral_7-9-25.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: First_Report_of_Injury_or_Illness_-_2025-07-10T070738.159.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding First_Report_of_Injury_or_Illness_-_2025-07-10T070738.159.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 165380 bytes
ğŸ”§ DEBUG: Added First_Report_of_Injury_or_Illness_-_2025-07-10T070738.159.pdf to processing list
ğŸ”§ DEBUG: Checking attachment: image001.gif
ğŸ”§ DEBUG: Attachment suffix: .gif
ğŸ”§ DEBUG: Supported file type: False
ğŸ”§ DEBUG: Skipping unsupported file: image001.gif
ğŸ”§ DEBUG: Checking attachment: Workers_Compensation_Referral_Information_Form_William_Jones_7-10-25.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding Workers_Compensation_Referral_Information_Form_William_Jones_7-10-25.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 509654 bytes
ğŸ”§ DEBUG: Added Workers_Compensation_Referral_Information_Form_William_Jones_7-10-25.pdf to processing list
ğŸ”§ DEBUG: Processing 5 attachments together
ğŸ”§ DEBUG: Calling consolidated extract function...
ğŸ”§ DEBUG: Starting consolidated extraction for 5 files
ğŸ”§ DEBUG: Email body length: 3404 characters
ğŸ”§ DEBUG: OpenAI API Key set: âœ…
ğŸ”§ DEBUG: Processing file 1/5: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 8 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 436912
ğŸ”§ DEBUG: Processing file 2/5: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 2 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 1073872
ğŸ”§ DEBUG: Processing file 3/5: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 1 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 287856
ğŸ”§ DEBUG: Processing file 4/5: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 2 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 508160
ğŸ”§ DEBUG: Processing file 5/5: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 1 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 323004
ğŸ”§ DEBUG: Prepared content with 6 items (1 text + 5 images)
ğŸ”§ DEBUG: Preparing OpenAI API call...ğŸš€ Starting archive process...
âœ… Successfully archived 0 directories to data\emails\archive

ğŸ”§ DEBUG: Using model: gpt-4o-mini
ğŸ”§ DEBUG: Max tokens: 2048
ğŸ”§ DEBUG: Making OpenAI API call...
ğŸ”§ DEBUG: OpenAI API call completed
ğŸ”§ DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>
ğŸ”§ DEBUG: Number of choices: 1
ğŸ”§ DEBUG: Response content length: 1550
ğŸ”§ DEBUG: Response content preview: ```json
{
  "referral": true,
  "employer_address": "117 W. Duval Street, Suite 335, Jacksonville, FL 32202",
  "employer_email": "bcapers@coj.net",
  "injury_description": "While working a traffic cr...
ğŸ”§ DEBUG: Attempting to parse JSON...
ğŸ”§ DEBUG: JSON parsing successful
ğŸ”§ DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']
ğŸ”§ DEBUG: Consolidated extraction completed successfully
âŒ Database update failed for 20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724: 39 values for 38 columns
âŒ Failed to update database for 20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724
ğŸ”§ DEBUG: Processing directory: 20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-
ğŸ”§ DEBUG: Checking required files...
ğŸ”§ DEBUG: Summary file exists: True
ğŸ”§ DEBUG: Metadata file exists: True
ğŸ”§ DEBUG: Attachments dir exists: True
ğŸ”§ DEBUG: Loading JSON files...
ğŸ”§ DEBUG: JSON files loaded successfully
ğŸ”§ DEBUG: Email text length: 4078 characters
ğŸ”§ DEBUG: Found 1 attachments
ğŸ”§ DEBUG: Checking attachment: Wemheuer_william_MRI_order_07082025.pdf
ğŸ”§ DEBUG: Attachment suffix: .pdf
ğŸ”§ DEBUG: Supported file type: True
ğŸ” Adding Wemheuer_william_MRI_order_07082025.pdf to consolidated processing
ğŸ”§ DEBUG: Reading file bytes...
ğŸ”§ DEBUG: File size: 990787 bytes
ğŸ”§ DEBUG: Added Wemheuer_william_MRI_order_07082025.pdf to processing list
ğŸ”§ DEBUG: Processing 1 attachments together
ğŸ”§ DEBUG: Calling consolidated extract function...
ğŸ”§ DEBUG: Starting consolidated extraction for 1 files
ğŸ”§ DEBUG: Email body length: 4078 characters
ğŸ”§ DEBUG: OpenAI API Key set: âœ…
ğŸ”§ DEBUG: Processing file 1/1: .pdf
ğŸ”§ DEBUG: Converting PDF to images...
ğŸ”§ DEBUG: PDF converted to 1 page(s)
ğŸ”§ DEBUG: Added PDF page, base64 length: 574824
ğŸ”§ DEBUG: Prepared content with 2 items (1 text + 1 images)
ğŸ”§ DEBUG: Preparing OpenAI API call...
ğŸ”§ DEBUG: Using model: gpt-4o-mini
ğŸ”§ DEBUG: Max tokens: 2048
ğŸ”§ DEBUG: Making OpenAI API call...
ğŸ”§ DEBUG: OpenAI API call completed
ğŸ”§ DEBUG: Response object type: <class 'openai.types.chat.chat_completion.ChatCompletion'>
ğŸ”§ DEBUG: Number of choices: 1
ğŸ”§ DEBUG: Response content length: 1419
ğŸ”§ DEBUG: Response content preview: ```json
{
  "referral": true,
  "employer_address": null,
  "employer_email": null,
  "injury_description": "Work related injury to knee and hip",
  "diagnosis_code": ["Y99.0", "M25.562", "M25.552"],
...
ğŸ”§ DEBUG: Attempting to parse JSON...
ğŸ”§ DEBUG: JSON parsing successful
ğŸ”§ DEBUG: Parsed data keys: ['referral', 'employer_address', 'employer_email', 'injury_description', 'diagnosis_code', 'icd_code', 'diagnosis_description', 'intake_client_company', 'intake_client_email', 'intake_client_name', 'intake_adjuster_name', 'intake_adjuster_email', 'intake_adjuster_phone', 'intake_client_phone', 'patient_name', 'patient_gender', 'patient_id', 'order_number', 'patient_dob', 'patient_doi', 'intake_instructions', 'patient_address', 'patient_email', 'patient_phone', 'intake_preferred_provider', 'intake_requested_procedure', 'patient_instructions', 'priority', 'referring_provider_name', 'referring_provider_npi', 'referring_provider_address', 'referring_provider_email', 'referring_provider_phone']
ğŸ”§ DEBUG: Consolidated extraction completed successfully
âŒ Database update failed for 20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-: 39 values for 38 columns
âŒ Failed to update database for 20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-
ğŸ”§ DEBUG: Processing directory: archive
ğŸ”§ DEBUG: Checking required files...
ğŸ”§ DEBUG: Summary file exists: False
ğŸ”§ DEBUG: Metadata file exists: False
ğŸ”§ DEBUG: Attachments dir exists: False
âš ï¸  Missing summary or metadata in archive, skipping
âœ… Successfully processed 0/11 directories
ğŸ”— Database connection closed

ğŸ“¦ Archiving processed emails...
2025-07-18 15:30:47,089 - INFO - ğŸ”„ Starting step: Address Geocoding
2025-07-18 15:30:47,090 - INFO - ğŸ“‹ Command: C:\Users\ChristopherCato\AppData\Local\Programs\Python\Python313\python.exe scripts/geocode_addresses.py
2025-07-18 15:30:48,050 - INFO - âœ… Address Geocoding completed successfully in 1.0s
2025-07-18 15:30:48,050 - INFO - ğŸ“¤ Output: ğŸ—ºï¸  Starting geocoding process...
   Database: intake-crm.db
   Force refresh: False
   Dry run: False
âœ… Created location index
âœ… No addresses need geocoding
2025-07-18 15:30:50,051 - INFO - ğŸ”„ Starting step: S3 Document Upload
2025-07-18 15:30:50,052 - INFO - ğŸ“‹ Command: C:\Users\ChristopherCato\AppData\Local\Programs\Python\Python313\python.exe scripts/upload_docs_to_s3.py
2025-07-18 15:31:04,857 - INFO - âœ… S3 Document Upload completed successfully in 14.8s
2025-07-18 15:31:04,857 - INFO - ğŸ“¤ Output: ğŸ”— Connected to S3 bucket: intake-crm-prod
ğŸ“ Scanning directory: data\emails
ğŸ“‹ Found 11 directories
ğŸ“¤ Will process 11 directories

ğŸš€ Starting upload of 11 directories...

ğŸ“¤ [1/11] Uploading: 20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061
ğŸ“¤ Uploading email directory: data\emails\20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061
   S3 prefix: data/20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061
   âœ… email_metadata.json
   âœ… summary.json
   âœ… attachments\Document.pdf
   âœ… attachments\image269152.png
   âœ… attachments\image322368.png
   âœ… attachments\image518828.png
   âœ… attachments\image589009.png
   âœ… attachments\MedicalReportForm2.pdf
   âœ… attachments\MedicalReportingForm.pdf
   ğŸ“‹ Upload manifest: data/20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061/upload_manifest.json
âœ… Successfully uploaded 9 files

ğŸ“¤ [2/11] Uploading: 20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535
ğŸ“¤ Uploading email directory: data\emails\20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535
   S3 prefix: data/20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535
   âœ… email_metadata.json
   âœ… summary.json
   âœ… attachments\image001.png
   âœ… attachments\Stephanie_Abel_FROI.pdf
   âœ… attachments\Stephanie_Abel_L_Knee_MRI_Order_Murphy_6-26-25.pdf
   âœ… attachments\Stephanie_Abel_REF_2.docx
   ğŸ“‹ Upload manifest: data/20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535/upload_manifest.json
âœ… Successfully uploaded 6 files

ğŸ“¤ [3/11] Uploading: 20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge
ğŸ“¤ Uploading email directory: data\emails\20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge
   S3 prefix: data/20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge
   âœ… email_metadata.json
   âœ… summary.json
   âœ… attachments\Cert_JorCru_03-28-2025.pdf
   âœ… attachments\image001.png
   âœ… attachments\image002.jpg
   âœ… attachments\image003.png
   âœ… attachments\image004.png
   ğŸ“‹ Upload manifest: data/20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge/upload_manifest.json
âœ… Successfully uploaded 7 files

ğŸ“¤ [4/11] Uploading: 20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373
ğŸ“¤ Uploading email directory: data\emails\20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373
   S3 prefix: data/20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373
   âœ… email_metadata.json
   âœ… summary.json
   âœ… attachments\image001.png
   âœ… attachments\image003.png
   âœ… attachments\NOI.pdf
   âœ… attachments\N_Rangel_MRI_L_knee_RX.pdf
   ğŸ“‹ Upload manifest: data/20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373/upload_manifest.json
âœ… Successfully uploaded 6 files

ğŸ“¤ [5/11] Uploading: 20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS
ğŸ“¤ Uploading email directory: data\emails\20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS
   S3 prefix: data/20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS
   âœ… email_metadata.json
   âœ… summary.json
   âœ… attachments\First_Report_of_Injury_or_Illness_LMills.pdf
   âœ… attachments\image001.png
   âœ… attachments\MRI_Referral_LaNarria_Mills.pdf
   âœ… attachments\Workers_Comp_Referral_Information-LaNarria_Wells.docx
   ğŸ“‹ Upload manifest: data/20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS/upload_manifest.json
âœ… Successfully uploaded 6 files

ğŸ“¤ [6/11] Uploading: 20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah
ğŸ“¤ Uploading email directory: data\emails\20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah
   S3 prefix: data/20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah
   âœ… email_metadata.json
   âœ… summary.json
   âœ… attachments\FROI_SP.pdf
   âœ… attachments\image001.jpg
   âœ… attachments\mri_script.pdf
   ğŸ“‹ Upload manifest: data/20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah/upload_manifest.json
âœ… Successfully uploaded 5 files

ğŸ“¤ [7/11] Uploading: 20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO
ğŸ“¤ Uploading email directory: data\emails\20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO
   S3 prefix: data/20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO
   âœ… email_metadata.json
   âœ… summary.json
   âœ… attachments\DO-01-3471-163_07-10-2025-08-56.pdf
   âœ… attachments\image001.png
   âœ… attachments\image003.png
   âœ… attachments\image004.png
   âœ… attachments\image005.png
   âœ… attachments\image007.png
   âœ… attachments\image008.png
   âœ… attachments\image009.png
   ğŸ“‹ Upload manifest: data/20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO/upload_manifest.json
âœ… Successfully uploaded 10 files

ğŸ“¤ [8/11] Uploading: 20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_
ğŸ“¤ Uploading email directory: data\emails\20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_
   S3 prefix: data/20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_
   âœ… email_metadata.json
   âœ… summary.json
   âœ… attachments\07-08-25_Jackson_James_Imaging-Ref.pdf
   âœ… attachments\4-11-25_FIRST_REPORT_OF_INJURY_-_JAMES_JACKSON.pdf
   âœ… attachments\image001.png
   ğŸ“‹ Upload manifest: data/20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_/upload_manifest.json
âœ… Successfully uploaded 5 files

ğŸ“¤ [9/11] Uploading: 20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724
ğŸ“¤ Uploading email directory: data\emails\20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724
   S3 prefix: data/20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724
   âœ… email_metadata.json
   âœ… summary.json
   âœ… attachments\Amelia_Urgent_Care_DWC-25_7-9-25.pdf
   âœ… attachments\Amelia_Urgent_Care_MRI_RightKnee_Without_Contrast_Referral_7-9-25.pdf
   âœ… attachments\Amelia_Urgent_Care__7-9-25.pdf
   âœ… attachments\First_Report_of_Injury_or_Illness_-_2025-07-10T070738.159.pdf
   âœ… attachments\image001.gif
   âœ… attachments\Workers_Compensation_Referral_Information_Form_William_Jones_7-10-25.pdf
   ğŸ“‹ Upload manifest: data/20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724/upload_manifest.json
âœ… Successfully uploaded 8 files

ğŸ“¤ [10/11] Uploading: 20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-
ğŸ“¤ Uploading email directory: data\emails\20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-
   S3 prefix: data/20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-
   âœ… email_metadata.json
   âœ… summary.json
   âœ… attachments\Wemheuer_william_MRI_order_07082025.pdf
   ğŸ“‹ Upload manifest: data/20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-/upload_manifest.json
âœ… Successfully uploaded 3 files

ğŸ“¤ [11/11] Uploading: archive
ğŸ“¤ Uploading email directory: data\emails\archive
   S3 prefix: data/archive
   âœ… 20250627_162806_AAMkADBlMGM0OTU0LTJk_Workers_Compensation_Claim_WC2\email_metadata.json
   âœ… 20250627_162806_AAMkADBlMGM0OTU0LTJk_Workers_Compensation_Claim_WC2\extracted.json
   âœ… 20250627_162806_AAMkADBlMGM0OTU0LTJk_Workers_Compensation_Claim_WC2\summary.json
   âœ… 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\email_metadata.json
   âœ… 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\extracted.json
   âœ… 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\summary.json
   âœ… 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\email_metadata.json
   âœ… 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\extracted.json
   âœ… 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\summary.json
   âœ… 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\email_metadata.json
   âœ… 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\extracted.json
   âœ… 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\summary.json
   âœ… 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\attachments\AdjusterCM-Contact-Auth-Request.pdf
   âœ… 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\attachments\image001.png
   âœ… 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\attachments\image002.png
   âœ… 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\attachments\image003.png
   âœ… 20250627_162824_AAMkADBlMGM0OTU0LTJk_190622199-001_PARRA_DAVID\attachments\image004.png
   âœ… 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\attachments\Demographics_Carmelo.png
   âœ… 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\attachments\image001.png
   âœ… 20250627_162818_AAMkADBlMGM0OTU0LTJk_WC2025651204_Distribution_Mitc\attachments\MRI_Referral_Carmelo.pdf
   âœ… 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\attachments\AdjusterCM-Contact-Auth-Request.pdf
   âœ… 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\attachments\image001.png
   âœ… 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\attachments\image002.png
   âœ… 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\attachments\image003.png
   âœ… 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\attachments\image004.png
   âœ… 20250627_162813_AAMkADBlMGM0OTU0LTJk_AUTHORIZATION_Regarding_KRYSTA\attachments\VOECHTING.docx
   âœ… 20250627_162806_AAMkADBlMGM0OTU0LTJk_Workers_Compensation_Claim_WC2\attachments\image001.png
   âœ… 20250627_162806_AAMkADBlMGM0OTU0LTJk_Workers_Compensation_Claim_WC2\attachments\PatientReferralReport_PATRICIACLAGUE_06-26-2025.pdf
   ğŸ“‹ Upload manifest: data/archive/upload_manifest.json
âœ… Successfully uploaded 28 files

ğŸ“Š Upload Summary:
   âœ… Successful: 11
   âŒ Failed: 0
   ğŸ“ Total: 11

ğŸ‰ Successfully uploaded 11 directories to S3!
   Bucket: intake-crm-prod
   Structure: intake-crm-prod/data/{email_id}/
2025-07-18 15:31:06,859 - INFO - ğŸ”„ Starting step: Database Ingestion
2025-07-18 15:31:06,860 - INFO - ğŸ“‹ Command: C:\Users\ChristopherCato\AppData\Local\Programs\Python\Python313\python.exe scripts/ingest_to_db.py
2025-07-18 15:31:06,958 - INFO - âœ… Database Ingestion completed successfully in 0.1s
2025-07-18 15:31:06,959 - INFO - ğŸ“¤ Output: ğŸ”§ Creating/connecting to database: intake-crm.db
ğŸš€ Processing 11 email directories
âš ï¸  No extracted.json found in 20250627_162834_AAMkADBlMGM0OTU0LTJk_C7001738_JUAN_GRAJALES_DOL_061
âš ï¸  No extracted.json found in 20250627_162843_AAMkADBlMGM0OTU0LTJk_Stephanie_Abel_2410_00535
âš ï¸  No extracted.json found in 20250627_162849_AAMkADBlMGM0OTU0LTJk_23C87K663469_Cruz_Duran_Jorge
âš ï¸  No extracted.json found in 20250627_162854_AAMkADBlMGM0OTU0LTJk_Nilandy_Rangel_D1400373
âš ï¸  No extracted.json found in 20250627_162859_AAMkADBlMGM0OTU0LTJk_2510_00754_-_LANARRIA_A_MILLS
âš ï¸  No extracted.json found in 20250627_162904_AAMkADBlMGM0OTU0LTJk_WC2025643625_Retail_Pena_Sarah
âš ï¸  No extracted.json found in 20250710_093824_AAMkADBlMGM0OTU0LTJk_25D55M642356_-_Rodney_Box_-_DO
âš ï¸  No extracted.json found in 20250710_093828_AAMkADBlMGM0OTU0LTJk_PGS1025065550_Jackson_James_-_
âš ï¸  No extracted.json found in 20250710_093833_AAMkADBlMGM0OTU0LTJk_William_Jones_2510_00724
âš ï¸  No extracted.json found in 20250710_093835_AAMkADBlMGM0OTU0LTJk_Wemheuer_William_CBF25012127_-
âš ï¸  No extracted.json found in archive
âœ… Successfully processed 0/11 directories
2025-07-18 15:31:08,959 - INFO - ğŸ”„ Starting step: Email Archiving
2025-07-18 15:31:08,960 - INFO - ğŸ“‹ Command: C:\Users\ChristopherCato\AppData\Local\Programs\Python\Python313\python.exe scripts/archive_processed_emails.py
2025-07-18 15:31:09,052 - INFO - âœ… Email Archiving completed successfully in 0.1s
2025-07-18 15:31:09,052 - INFO - ğŸ“¤ Output: ğŸš€ Starting archive process...
âœ… Successfully archived 0 directories to data\emails\archive
2025-07-18 15:31:11,053 - INFO - 
ğŸ“Š PIPELINE EXECUTION SUMMARY
==================================================
Start Time: 2025-07-18 15:27:54
End Time: 2025-07-18 15:31:11
Total Duration: 3.3 minutes
Overall Status: âœ… SUCCESS

ğŸ“‹ STEP RESULTS:
------------------------------
Email Ingestion: âœ… PASS (4.8s)
LLM Data Extraction: âœ… PASS (163.7s)
Address Geocoding: âœ… PASS (1.0s)
S3 Document Upload: âœ… PASS (14.8s)
Database Ingestion: âœ… PASS (0.1s)
Email Archiving: âœ… PASS (0.1s)

ğŸ“ˆ STATISTICS:
------------------------------
Total Steps: 6
Successful Steps: 6
Failed Steps: 0
Total Errors: 0

2025-07-18 15:31:11,059 - INFO - ğŸ“„ Detailed results saved to: logs\pipeline_results_20250718_152754.json
